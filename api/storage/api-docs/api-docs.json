{
    "swagger": "2.0",
    "info": {
        "title": "LATLONG API",
        "description": "LATLONG",
        "termsOfService": "http://helloreverb.com/terms/",
        "contact": {
            "email": "admin@latlong.mx"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0.0"
    },
    "host": "52.8.211.37/",
    "basePath": "api.walmex.latlong.mx",
    "schemes": [
        "http"
    ],
    "paths": {
        "/dyn/catalog/{tipo_catalogo}": {
            "get": {
                "tags": [
                    "catalog"
                ],
                "summary": "Catalogo del API Geo Dinamico",
                "description": "Regresa el catalogo de las tablas disponibles para analsis. Donde> /catalog/{tipo_catalogo} tipo_catalogo=(analisis|denue_cods)",
                "operationId": "catalog",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "tipo_catalogo",
                        "in": "path",
                        "description": "Tipo de catalogo, (analisis|denue_cods)",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "cod",
                        "in": "path",
                        "description": "Regresa el catalogo de codigos segun el integer enviado ",
                        "required": false,
                        "type": "integer",
                        "default": "43"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/catalog/analisis"
                        }
                    }
                }
            }
        },
        "/dyn/heat?filter={filter}&wkt={wkt}": {
            "get": {
                "tags": [
                    "HeatMap data"
                ],
                "summary": "Obtiene datos para usar en un leafelt usando heatmap",
                "description": "Genera los datos necesarios para utilizar en un heatmap de leaflet se requiere mandar el codigo y si se quiere que contenga una palabra mandar filter",
                "operationId": "intersect",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "filter",
                        "in": "path",
                        "description": "Filtro para obtener los datos",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "cod",
                        "in": "path",
                        "description": "Codigo a filtrar",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "wkt",
                        "in": "path",
                        "description": "WKT para filtro geometrico",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/heat"
                        }
                    }
                },
                "security": [
                    {
                        "access_token": []
                    }
                ]
            }
        },
        "/dyn/intersect?s={schema}&t={table}&c={columns}&w={column_filter}:{value_filter}&wkt={wkt}&mts={meters}": {
            "get": {
                "tags": [
                    "Get geometry as GeoJSON by WKT"
                ],
                "summary": "Obtener lo que intersecte",
                "description": "Servicio de analisis que regresa las geometrias con la informacion solicitada segun el WKT enviado como parametro",
                "operationId": "intersect",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "schema",
                        "in": "path",
                        "description": "Schema",
                        "required": true,
                        "type": "string",
                        "default": "inegi"
                    },
                    {
                        "name": "table",
                        "in": "path",
                        "description": "table",
                        "required": true,
                        "type": "string",
                        "default": "inter15_vias"
                    },
                    {
                        "name": "columns",
                        "in": "path",
                        "description": "Columna a agrupar",
                        "required": false,
                        "type": "string",
                        "default": "tipovial"
                    },
                    {
                        "name": "column_filter",
                        "in": "path",
                        "description": "Columna para usar en un filtro (where)",
                        "required": false,
                        "type": "string",
                        "default": ""
                    },
                    {
                        "name": "value_filter",
                        "in": "path",
                        "description": "valor que tendra la columna a filtrar",
                        "required": false,
                        "type": "string",
                        "default": ""
                    },
                    {
                        "name": "wkt",
                        "in": "path",
                        "description": "WKT geometry format",
                        "required": true,
                        "type": "string",
                        "default": "POINT(-102.2827363014221 21.85996530350067)"
                    },
                    {
                        "name": "meters",
                        "in": "path",
                        "description": "Metros solo si wkt es POINT",
                        "required": false,
                        "type": "integer",
                        "default": "100"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/intersect"
                        }
                    }
                }
            }
        },
        "/dyn/pb_wms?col={column}&WMS={WMS}": {
            "get": {
                "tags": [
                    "pb_wms"
                ],
                "summary": "WMS con estilo dinamico segun la columna",
                "description": "Servicio dinamico WMS que coloriza segun la columna solicitada",
                "operationId": "pb_wms",
                "produces": [
                    "image/png"
                ],
                "parameters": [
                    {
                        "name": "WMS",
                        "in": "path",
                        "description": "Parametros estandar WMS",
                        "required": true,
                        "type": "string",
                        "default": "inegi"
                    },
                    {
                        "name": "col",
                        "in": "path",
                        "description": "Columna de pob y viv a colorizar",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/intersect"
                        }
                    }
                },
                "security": [
                    {
                        "access_token": []
                    }
                ]
            }
        },
        "/ws/icon?nm={name}&access_token={token_id}": {
            "get": {
                "tags": [
                    "Workspace"
                ],
                "summary": "Obtiene las ubicaciones registradas por el usuario",
                "description": "Obtiene los registros incluido las geometrias ingresadas por el usuario",
                "operationId": "catalog",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "nm",
                        "in": "path",
                        "description": "nombre del icono guardado en el perfile del usuario",
                        "required": true,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "400": {
                        "description": "Bad request falta access_token",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    },
                    "200": {
                        "description": "icono seleccionado",
                        "schema": {
                            "$ref": "#/ws/up"
                        }
                    }
                },
                "security": [
                    {
                        "access_token": []
                    }
                ]
            }
        },
        "/ws/places/{id}": {
            "delete": {
                "tags": [
                    "Workspace"
                ],
                "summary": "Elimina la ubicacion que se envia como parametro",
                "description": "Elimina la ubicacion que se envia como parametro",
                "operationId": "catalog",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id de la ubicaciones a elimianr",
                        "required": true,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "400": {
                        "description": "Bad request falta access_token",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    },
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/ws/up"
                        }
                    }
                },
                "security": [
                    {
                        "access_token": []
                    }
                ]
            }
        },
        "/ws/places?p={id_ubicacion}": {
            "get": {
                "tags": [
                    "Workspace"
                ],
                "summary": "Obtiene las ubicaciones registradas por el usuario",
                "description": "Obtiene los registros incluido las geometrias ingresadas por el usuario",
                "operationId": "catalog",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "id_layer",
                        "in": "path",
                        "description": "id de la ubicacion a actualizar si no se manda se obtendran todos",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "name": "competence",
                        "in": "path",
                        "description": "si se requiere traer todos las competencias competence=1",
                        "required": false,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "400": {
                        "description": "Bad request falta access_token",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    },
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/ws/up"
                        }
                    }
                },
                "security": [
                    {
                        "access_token": []
                    }
                ]
            }
        },
        "/ws/places/": {
            "post": {
                "tags": [
                    "Workspace"
                ],
                "summary": "Subir archivo para agregar a mis ubicaciones",
                "description": "Sube un archivo csv a la seccion de mis ubicaciones del usuario registrado a traves del access_token",
                "operationId": "catalog",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "nm",
                        "in": "path",
                        "description": "Nombre de mis hubicaciones",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "pin",
                        "in": "formData",
                        "description": "Url del PIN a utilizar",
                        "required": false,
                        "type": "file"
                    },
                    {
                        "name": "file",
                        "in": "formData",
                        "description": "Archivo csv",
                        "required": true,
                        "type": "file"
                    },
                    {
                        "name": "lat",
                        "in": "path",
                        "description": "Columna con la latitud",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "lng",
                        "in": "path",
                        "description": "Columna con la longitud",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "competence",
                        "in": "path",
                        "description": "Si es competencia se requiere el parametro competence=1 si no se manda el parametro por default es false",
                        "required": false,
                        "type": "integer"
                    }
                ],
                "responses": {
                    "400": {
                        "description": "Bad request falta access_token",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    },
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/ws/up"
                        }
                    }
                },
                "security": [
                    {
                        "access_token": []
                    }
                ]
            }
        },
        "/ws/places/{id}?nom={nom}&pin={pin}": {
            "put": {
                "tags": [
                    "Workspace"
                ],
                "summary": "Actualiza el icono o nombre de una ubicacion",
                "description": "Elimina la ubicacion que se envia como parametro",
                "operationId": "catalog",
                "produces": [
                    "application/json"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Id de la ubicacion a actualizar",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "nom",
                        "in": "path",
                        "description": "Nombre de la ubicacion a actualizar",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "name": "pin",
                        "in": "formData",
                        "description": "Archivo del icono",
                        "required": false,
                        "type": "file"
                    }
                ],
                "responses": {
                    "400": {
                        "description": "Bad request falta access_token",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    },
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/ws/up"
                        }
                    }
                },
                "security": [
                    {
                        "access_token": []
                    }
                ]
            }
        },
        "/status/": {
            "get": {
                "tags": [
                    "status"
                ],
                "summary": "Estatus de la API",
                "description": "Returns a single pet",
                "operationId": "getPetById",
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/status"
                        }
                    }
                }
            }
        }
    },
    "definitions": {},
    "externalDocs": {
        "description": "Find out more about Swagger",
        "url": "http://swagger.io"
    }
}